var config,express,flash,passport,path;flash=require("connect-flash"),express=require("express"),path=require("path"),passport=require("passport"),config=require("./config"),module.exports=function(e){return e.set("port",process.env.PORT||3e3),e.set("views",path.join(__dirname,"../views")),e.set("view engine","jade"),e.use(express.favicon()),"development"===config.env&&e.use(express.logger("dev")),e.use(express.cookieParser()),e.use(express.bodyParser()),e.use(express.methodOverride()),e.use(express.session({secret:"super secret string"})),e.use(flash()),"development"===config.env&&e.use(express.errorHandler()),e.use(passport.initialize()),e.use(passport.session()),require("../config/passport")(e),e.use(express.compress({threshold:0})),e.use("/public",express["static"](path.join(__dirname,"../../assets/public"))),e.use("/common",express["static"](path.join(__dirname,"../../assets/common"))),e.use("/components",express["static"](path.join(__dirname,"../../../bower_components"))),e.use(function(e,s,r){return e.url.match(/^\/private\//)?e.isAuthenticated()?r():s.send(401):r()}),e.use("/private",express["static"](path.join(__dirname,"../../assets/private"))),e.use(e.router),require("../config/routes")(e)};